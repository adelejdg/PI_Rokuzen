<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rokuzen - massagem terapêutica</title>
    <link rel="icon" href="mídias/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="00_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Marcellus+SC&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <img src="mídias/cropped-logomarca_pequena2.png" id="logoRokuzen" alt="Logo Rokuzen">

        <nav>
            <div class="nav-top">
                <div id="icones">
                    <a href="https://rokuzen.com.br/feed/rss/" title="Assine nosso canal rss"><img src="mídias/icon-rss.png" class="icon" alt="rss"></a>
                    <a href="mailto:contato@rokuzen.com.br" title="Email"><img src="mídias/icon-email.png" class="icon" alt="email"></a>
                    <a href="https://www.facebook.com/rokuzen.massagem" title="Facebook"><img src="mídias/icon-fb.png" class="icon" alt="facebook"></a>
                    <a href="https://www.instagram.com/rokuzen.massagem" title="Instagram"><img src="mídias/icon-insta.png" class="icon" alt="instagram"></a>
                    <a href="https://www.linkedin.com/company/rokuzen?trk=top_nav_home" title="Linkedin"><img src="mídias/icon-linkedin.png" class="icon" alt="linkedin"></a>
                </div>

                <div id="header-pesquisa">
                    <form action="/buscar" method="get">
                        <input type="text" name="q" placeholder="Buscar..." />
                        <button type="submit"><i class="fa fa-search"></i></button>
                    </form>
                    <span id="header-greeting"></span>
                </div>
            </div>

            <span>
                <a href="#.html">
                    <div class="nav-item">
                        <div class="dropdown">Quem somos <i class="fa fa-caret-down"></i>
                            <div class="dropdown-conteudo">
                                <a href="#">História</a><br>
                                <a href="#">Missão, visão e valores</a>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="#.html">
                    <div class="nav-item">
                        <div class="dropdown">O que fazemos <i class="fa fa-caret-down"></i>
                            <div class="dropdown-conteudo">
                                <a href="#">Eventos / In-company</a><br>
                                <a href="#">Serviços</a>
                            </div>
                        </div>
                    </div>
                </a>

                <a href="#.html">
                    <div class="nav-item">
                        <div class="dropdown">Onde estamos <i class="fa fa-caret-down"></i>
                            <div class="dropdown-conteudo">
                                <a href="#">Unidades</a><br>
                                <a href="#">Nossos clientes</a><br>
                                <a href="#">Nossos parceiros</a>
                            </div>
                        </div>
                    </div>
                </a>

                <div class="nav-item">|</div>

                <a href="#.html"><div class="nav-item">Agende seu horário</div></a>

                <a href="#.hmtl">
                    <div class="nav-item">
                        <div class="dropdown"><span style="color: rgb(110, 47, 126);">Minha conta <i class="fa fa-caret-down" style="margin-left: 5px; line-height: 21px;"></i></span>
                            <div class="dropdown-conteudo">
                                <a href="#" class="btn-access-account" id="btn-login">Acessar minha conta</a>
                                <div class="login-cta-row" id="login-cta">
                                        <span class="muted-small">Não tem conta?</span>
                                        <a href="#" class="link-start-here">Comece aqui</a>
                                </div>
                                <a href="02_meusdados.html" class="btn-access-account btn-block btn-logged-in">Meus dados</a>
                                <a href="#" class="btn-access-account btn-block btn-logged-in" id="link-agendamentos">Meus agendamentos</a>
                                <a href="#" id="btn-logout" class="btn-access-account btn-block btn-logged-in" onclick="logout()">Sair da conta</a>
                            </div>
                        </div>
                    </div>
                </a>
            </span>
        </nav>
    </header>
        <main>
                <!-- vlibras -->
                <div vw class="enabled">
                        <div vw-access-button class="active"></div>
                        <div vw-plugin-wrapper>
                                 <div class="vw-plugin-top-wrapper"></div>
                        </div>
                </div>
                <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
                <script>
                new window.VLibras.Widget('https://vlibras.gov.br/app');
                </script>

                <div id="conteudo-main">
                        <div class="carousel" aria-label="Destaques">
                                <button class="carousel-btn prev" aria-label="Anterior"><i class="fa fa-angle-left"></i></button>
                                <div class="carousel-track">
                                        <div class="carousel-slide is-active">
                                                <img src="mídias/fotoatendimento.png" alt="nosso atendimento">
                                                <div class="slide-caption">
                                                        <h3>Nosso atendimento</h3>
                                                        <p>Como atendemos e quais técnicas utilizamos em cada serviço.</p>
                                                        <button>Saiba mais <i class="fa fa-angle-double-right"></i></button>
                                                </div>
                                        </div>
                                        <div class="carousel-slide">
                                                <img src="mídias/agendamentos.png" alt="agendamento online">
                                                <div class="slide-caption">
                                                        <h3>Agendamento online</h3>
                                                        <p>Agende agora mesmo com poucos cliques!</p>
                                                        <button>Saiba mais <i class="fa fa-angle-double-right"></i></button>
                                                </div>
                                        </div>
                                        <div class="carousel-slide">
                                                <img src="mídias/giftcard.png" alt="gift card">
                                                <div class="slide-caption">
                                                        <h3>Gift Card Digital</h3>
                                                        <p>Dê um presente especial!</p>
                                                        <button>Saiba mais <i class="fa fa-angle-double-right"></i></button>
                                                </div>
                                        </div>
                                </div>
                                <button class="carousel-btn next" aria-label="Próximo"><i class="fa fa-angle-right"></i></button>
                        </div>
                </div>
                <div id="artigos">
                        <h2>Artigos</h2>
                        <div class="artigos-grid">
                                <article class="artigo-card">
                                        <img src="mídias/informativo3.jpg" alt="Mudança Climática e sua Influência na Imunidade">
                                        <h3>Mudança Climática e sua Influência na Imunidade: O Papel Benéfico da Massagem</h3>
                                </article>
                        <article class="artigo-card">
                                <img src="mídias/artigo1.jpg" alt="Novo conceito terapêutico Rokuzen no Allianz Parque">
                                <h3>Descubra o novo conceito terapêutico da Rokuzen Massagem na sombra do Allianz Parque!</h3>
                        </article>
                        <article class="artigo-card">
                                <img src="mídias/artigo2.jpg" alt="É normal ficar dolorido após massagem terapêutica?">
                                <h3>Ficar Dolorido Após Massagem Terapêutica, Liberação Miofascial ou Shiatsu é Normal?</h3>
                        </article>
                        </div>
                </div>
        </main>
        <footer>
                <div id="rodape1">
                        <div id="rdp-unidades">               
                                <h3>Unidades</h3>
                                <b><p>Golden Square Shopping - São Bernardo</p></b>
                                <p>WhatsApp: +55 11 9 4749 5306</p>
                                <br>
                                <b><p>Mooca Plaza Shopping</p></b>
                                <p>WhatsApp: +55 11 9 5084 1087</p>
                                <br>
                                <b><p>Grand Plaza Shopping - Santo André</p></b>
                                <p>WhatsApp: +55 11 91665 7900</p>
                                <br>
                                <b><p>Shopping West Plaza</p></b>
                                <p>WhatsApp: +55 11 9 1942 7901</p>
                        </div>
                        <div id="rdp-tags">
                                <h3>Tags</h3>
                                <a href="https://rokuzen.com.br/tag/ambientearomatizado/" class="tag-link-31 tag-link-position-1" title="1 tópico" style="font-size: 8pt;">ambientearomatizado</a>
                                <a href="https://rokuzen.com.br/tag/antistress/" class="tag-link-35 tag-link-position-2" title="1 tópico" style="font-size: 8pt;">antistress</a>
                                <a href="https://rokuzen.com.br/tag/aprender-massagem/" class="tag-link-99 tag-link-position-3" title="1 tópico" style="font-size: 8pt;">Aprender massagem</a>
                                <a href="https://rokuzen.com.br/tag/auriculoterapia/" class="tag-link-59 tag-link-position-4" title="2 tópicos" style="font-size: 11.6pt;">Auriculoterapia</a>
                                <a href="https://rokuzen.com.br/tag/bem-estar/" class="tag-link-10 tag-link-position-5" title="6 tópicos" style="font-size: 19pt;">bem-estar</a>
                                <a href="https://rokuzen.com.br/tag/cancer-de-mama/" class="tag-link-21 tag-link-position-6" title="1 tópico" style="font-size: 8pt;">cancer de mama</a>
                                <a href="https://rokuzen.com.br/tag/cartao-fidelidade/" class="tag-link-29 tag-link-position-7" title="1 tópico" style="font-size: 8pt;">cartão fidelidade</a>
                                <a href="https://rokuzen.com.br/tag/check-up/" class="tag-link-28 tag-link-position-8" title="1 tópico" style="font-size: 8pt;">Check-up</a>
                                <a href="https://rokuzen.com.br/tag/cha-oriental/" class="tag-link-34 tag-link-position-9" title="1 tópico" style="font-size: 8pt;">chá oriental</a>
                                <a href="https://rokuzen.com.br/tag/cultura-oriental/" class="tag-link-40 tag-link-position-10" title="2 tópicos" style="font-size: 11.6pt;">cultura oriental</a>
                                <a href="https://rokuzen.com.br/tag/facebook/" class="tag-link-18 tag-link-position-11" title="1 tópico" style="font-size: 8pt;">Facebook</a>
                                <a href="https://rokuzen.com.br/tag/genkan/" class="tag-link-38 tag-link-position-12" title="1 tópico" style="font-size: 8pt;">Genkan</a>
                                <a href="https://rokuzen.com.br/tag/golden-square-shopping/" class="tag-link-15 tag-link-position-13" title="1 tópico" style="font-size: 8pt;">Golden Square Shopping</a>
                                <a href="https://rokuzen.com.br/tag/higiene/" class="tag-link-39 tag-link-position-14" title="1 tópico" style="font-size: 8pt;">Higiene</a>
                                <a href="https://rokuzen.com.br/tag/inca-gov-br/" class="tag-link-22 tag-link-position-15" title="1 tópico" style="font-size: 8pt;">inca.gov.br</a>
                                <a href="https://rokuzen.com.br/tag/instagram/" class="tag-link-19 tag-link-position-16" title="1 tópico" style="font-size: 8pt;">INSTAGRAM</a>
                                <a href="https://rokuzen.com.br/tag/insonia/" class="tag-link-74 tag-link-position-17" title="2 tópicos" style="font-size: 11.6pt;">insônia</a>
                                <a href="https://rokuzen.com.br/tag/japao/" class="tag-link-43 tag-link-position-18" title="1 tópico" style="font-size: 8pt;">Japão</a>
                                <a href="https://rokuzen.com.br/tag/jardim-zen/" class="tag-link-32 tag-link-position-19" title="1 tópico" style="font-size: 8pt;">jardim zen</a>
                                <a href="https://rokuzen.com.br/tag/junhovermelho/" class="tag-link-44 tag-link-position-20" title="1 tópico" style="font-size: 8pt;">junhovermelho</a>
                                <a href="https://rokuzen.com.br/tag/koto/" class="tag-link-41 tag-link-position-21" title="1 tópico" style="font-size: 8pt;">Koto</a>
                                <a href="https://rokuzen.com.br/tag/massagem/" class="tag-link-7 tag-link-position-22" title="9 tópicos" style="font-size: 22pt;">massagem</a>
                                <a href="https://rokuzen.com.br/tag/massagem-para-dor-de-cabeca/" class="tag-link-60 tag-link-position-23" title="2 tópicos" style="font-size: 11.6pt;">Massagem para dor de cabeça</a>
                                <a href="https://rokuzen.com.br/tag/massagem-relaxante/" class="tag-link-98 tag-link-position-24" title="1 tópico" style="font-size: 8pt;">Massagem relaxante</a>
                                <a href="https://rokuzen.com.br/tag/massoterapia/" class="tag-link-14 tag-link-position-25" title="3 tópicos" style="font-size: 14pt;">Massoterapia</a>
                                <a href="https://rokuzen.com.br/tag/momento-zen/" class="tag-link-37 tag-link-position-26" title="1 tópico" style="font-size: 8pt;">momento zen</a>
                                <a href="https://rokuzen.com.br/tag/musica-oriental/" class="tag-link-42 tag-link-position-27" title="1 tópico" style="font-size: 8pt;">Música Oriental</a>
                                <a href="https://rokuzen.com.br/tag/musica-relaxante/" class="tag-link-33 tag-link-position-28" title="2 tópicos" style="font-size: 11.6pt;">música relaxante</a>
                                <a href="https://rokuzen.com.br/tag/novembro-azul/" class="tag-link-27 tag-link-position-29" title="1 tópico" style="font-size: 8pt;">Novembro Azul</a>
                                <a href="https://rokuzen.com.br/tag/octogono-zen/" class="tag-link-36 tag-link-position-30" title="1 tópico" style="font-size: 8pt;">octógono zen</a>
                                <a href="https://rokuzen.com.br/tag/outubro-rosa/" class="tag-link-20 tag-link-position-31" title="1 tópico" style="font-size: 8pt;">outubro rosa</a>
                                <a href="https://rokuzen.com.br/tag/prevencao/" class="tag-link-23 tag-link-position-32" title="1 tópico" style="font-size: 8pt;">prevenção</a>
                                <a href="https://rokuzen.com.br/tag/projeto/" class="tag-link-12 tag-link-position-33" title="1 tópico" style="font-size: 8pt;">Projeto</a>
                                <a href="https://rokuzen.com.br/tag/prosangue/" class="tag-link-45 tag-link-position-34" title="1 tópico" style="font-size: 8pt;">prosangue</a>
                                <a href="https://rokuzen.com.br/tag/quick-massage/" class="tag-link-6 tag-link-position-35" title="4 tópicos" style="font-size: 16pt;">quick-massage</a>
                                <a href="https://rokuzen.com.br/tag/quiosque/" class="tag-link-13 tag-link-position-36" title="1 tópico" style="font-size: 8pt;">Quiosque</a>
                                <a href="https://rokuzen.com.br/tag/reflexologia-podal/" class="tag-link-93 tag-link-position-37" title="3 tópicos" style="font-size: 14pt;">Reflexologia Podal</a>
                                <a href="https://rokuzen.com.br/tag/relaxamento/" class="tag-link-9 tag-link-position-38" title="4 tópicos" style="font-size: 16pt;">relaxamento</a>
                                <a href="https://rokuzen.com.br/tag/rokuzen/" class="tag-link-16 tag-link-position-39" title="5 tópicos" style="font-size: 17.6pt;">ROKUZEN</a>
                                <a href="https://rokuzen.com.br/tag/rokuzenrosa/" class="tag-link-25 tag-link-position-40" title="1 tópico" style="font-size: 8pt;">rokuzenrosa</a>
                                <a href="https://rokuzen.com.br/tag/saude-do-homem/" class="tag-link-26 tag-link-position-41" title="1 tópico" style="font-size: 8pt;">Saúde do Homem</a>
                                <a href="https://rokuzen.com.br/tag/shiatsu/" class="tag-link-103 tag-link-position-42" title="2 tópicos" style="font-size: 11.6pt;">Shiatsu</a>
                                <a href="https://rokuzen.com.br/tag/shopping/" class="tag-link-8 tag-link-position-43" title="2 tópicos" style="font-size: 11.6pt;">shopping</a>
                                <a href="https://rokuzen.com.br/tag/sipat/" class="tag-link-5 tag-link-position-44" title="1 tópico" style="font-size: 8pt;">SIPAT</a>
                                <a href="https://rokuzen.com.br/tag/tatami/" class="tag-link-30 tag-link-position-45" title="1 tópico" style="font-size: 8pt;">tatami</a>
                        </div>
                </div>
                
        </footer>
        
        <!-- Modais de autenticação -->
        <div id="modal-login" class="auth-modal" aria-hidden="true" role="dialog" aria-modal="true">
                <div class="auth-overlay" data-close="modal"></div>
                <div class="auth-dialog">
                        <div class="auth-header">
                                <h3 class="auth-title">Acessar minha conta</h3>
                                <button class="auth-close" type="button" data-close="modal" aria-label="Fechar">✕</button>
                        </div>
                        <div class="auth-body">
                                <form id="form-login" class="auth-form" novalidate>
                                        <div class="field-group">
                                                <label for="login-email">E-mail</label>
                                                <input type="email" id="login-email" name="email" autocomplete="email" required>
                                        </div>
                                        <div class="field-group">
                                                <label for="login-senha">Senha</label>
                                                <input type="password" id="login-senha" name="senha" autocomplete="current-password" required>
                                        </div>
                                        <div class="auth-actions">
                                                <button type="submit" class="auth-btn-primary">Entrar</button>
                                                <button type="button" class="auth-btn-secondary" data-close="modal">Cancelar</button>
                                        </div>
                                </form>
                        </div>
                </div>
        </div>

        <div id="modal-cadastro" class="auth-modal" aria-hidden="true" role="dialog" aria-modal="true">
                <div class="auth-overlay" data-close="modal"></div>
                <div class="auth-dialog">
                        <div class="auth-header">
                                <h3 class="auth-title">Criar conta</h3>
                                <button class="auth-close" type="button" data-close="modal" aria-label="Fechar">✕</button>
                        </div>
                        <div class="auth-body">
                                <form id="form-cadastro" class="auth-form" novalidate>
                                        <div class="field-group">
                                                <label for="cad-nome">Nome</label>
                                                <input type="text" id="cad-nome" name="nome" autocomplete="name" required>
                                        </div>
                                        <div class="field-group">
                                                <label for="cad-email">E-mail</label>
                                                <input type="email" id="cad-email" name="email" autocomplete="email" required>
                                        </div>
                                        <div class="field-group">
                                                <label for="cad-telefone">Telefone</label>
                                                <input type="tel" id="cad-telefone" name="telefone" autocomplete="tel" required>
                                        </div>
                                        <div class="field-group">
                                                <label for="cad-senha">Senha</label>
                                                <input type="password" id="cad-senha" name="senha" autocomplete="new-password" required>
                                        </div>
                                        <div class="field-group">
                                                <label for="cad-confirmar">Confirmar senha</label>
                                                <input type="password" id="cad-confirmar" name="confirmar" autocomplete="new-password" required>
                                                <div id="cad-erro" class="auth-error">As senhas não coincidem.</div>
                                        </div>
                                        <div class="auth-actions">
                                                <button type="submit" class="auth-btn-primary">Criar conta</button>
                                                <button type="button" class="auth-btn-secondary" data-close="modal">Cancelar</button>
                                        </div>
                                </form>
                        </div>
                </div>
        </div>

</body>

<script>
    // Função para verificar se o usuário está logado
    function isUserLoggedIn() {
        return localStorage.getItem('rokuzen_current_user') !== null;
    }

    // Função para atualizar a visibilidade dos elementos com base no status de login
    function updateLoginElements() {
        const loginBtn = document.getElementById('btn-login');
        const loginCta = document.getElementById('login-cta');
        const loggedInElements = document.querySelectorAll('.btn-logged-in');
        
        if (isUserLoggedIn()) {
            // Usuário está logado - esconder opções de login/criar conta
            if (loginBtn) loginBtn.style.display = 'none';
            if (loginCta) loginCta.style.display = 'none';
            
            // Mostrar elementos para usuários logados
            loggedInElements.forEach(el => {
                el.style.display = 'block';
                console.log('Mostrando elemento logado:', el.textContent);
            });
        } else {
            // Usuário não está logado - mostrar opções de login/criar conta
            if (loginBtn) loginBtn.style.display = 'block';
            if (loginCta) loginCta.style.display = 'block';
            
            // Esconder elementos para usuários logados
            loggedInElements.forEach(el => {
                el.style.display = 'none';
                console.log('Escondendo elemento logado:', el.textContent);
            });
        }
    }

    // Função de logout
    function logout() {
        // Remover usuário do localStorage
        localStorage.removeItem('rokuzen_current_user');
        
        // Limpar a saudação diretamente
        const greetingElement = document.getElementById('header-greeting');
        if (greetingElement) {
            greetingElement.textContent = '';
            greetingElement.classList.remove('is-visible');
            greetingElement.style.display = 'none';
        }
        
        // Atualizar elementos de interface
        updateLoginElements();
        updateAuthElements();
        
        alert('Você saiu da conta.');
        
        // Recarregar a página completamente para garantir que todos os elementos sejam atualizados
        window.location.href = window.location.href;
    }

    document.addEventListener('DOMContentLoaded', function () {
        // Configurar verificação de login para o link de agendamentos
        const linkAgendamentos = document.getElementById('link-agendamentos');
        if (linkAgendamentos) {
            linkAgendamentos.addEventListener('click', function(e) {
                e.preventDefault();
                if (isUserLoggedIn()) {
                    window.location.href = '03_meusagendamentos.html';
                } else {
                    alert('Entre na sua conta para poder agendar clientes');
                }
            });
        }
        
        // Inicializar estado dos elementos de login/logout
        updateLoginElements();
        
        // Forçar a atualização da interface após um pequeno delay
        setTimeout(function() {
            updateLoginElements();
            console.log("Estado de login:", isUserLoggedIn() ? "Logado" : "Não logado");
        }, 500);
        const track = document.querySelector('.carousel-track');
        const slides = Array.from(document.querySelectorAll('.carousel-slide'));
        const prevBtn = document.querySelector('.carousel-btn.prev');
        const nextBtn = document.querySelector('.carousel-btn.next');

        let currentIndex = slides.findIndex(s => s.classList.contains('is-active'));
        if (currentIndex < 0) currentIndex = 0;

        function updatePosition() {
                const offset = -currentIndex * 100;
                track.style.transform = 'translateX(' + offset + '%)';
        }

        function goTo(index) {
                currentIndex = (index + slides.length) % slides.length;
                slides.forEach((s, i) => s.classList.toggle('is-active', i === currentIndex));
                updatePosition();
        }

        prevBtn.addEventListener('click', () => goTo(currentIndex - 1));
        nextBtn.addEventListener('click', () => goTo(currentIndex + 1));

        // Touch / swipe básico
        let startX = 0;
        track.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
        }, { passive: true });
        track.addEventListener('touchend', (e) => {
                const endX = e.changedTouches[0].clientX;
                const delta = endX - startX;
                if (Math.abs(delta) > 40) {
                        if (delta < 0) goTo(currentIndex + 1);
                        else goTo(currentIndex - 1);
                }
        });

        updatePosition();
});

// Funcionalidade da barra de pesquisa
document.addEventListener('DOMContentLoaded', function () {
    const searchForm = document.querySelector('#header-pesquisa form');
    const searchInput = document.querySelector('#header-pesquisa input[name="q"]');
    
    console.log('Form encontrado:', searchForm);
    console.log('Input encontrado:', searchInput);
    
    if (searchForm && searchInput) {
        searchForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const searchTerm = searchInput.value.trim();
            console.log('Termo de busca:', searchTerm);
            
            if (searchTerm) {
                // Redireciona para página de resultados com o termo de busca
                window.location.href = `busca.html?q=${encodeURIComponent(searchTerm)}`;
            } else {
                alert('Digite algo para buscar!');
            }
        });
        
        // Também permite busca ao pressionar Enter
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                searchForm.dispatchEvent(new Event('submit'));
            }
        });
    } else {
        console.log('Elementos não encontrados');
    }
});
</script>

<script>
// Modais Login/Cadastro
document.addEventListener('DOMContentLoaded', function () {
        const loginModal = document.getElementById('modal-login');
        const signupModal = document.getElementById('modal-cadastro');

        function openModal(modal) {
                if (!modal) return;
                modal.classList.add('is-open');
                modal.setAttribute('aria-hidden', 'false');
        }

        function closeModal(modal) {
                if (!modal) return;
                modal.classList.remove('is-open');
                modal.setAttribute('aria-hidden', 'true');
        }

        // Abrir pelos links
        document.querySelectorAll('.btn-access-account:not(.btn-block)').forEach(function (el) {
                el.addEventListener('click', function (e) {
                        e.preventDefault();
                        openModal(loginModal);
                });
        });

        document.querySelectorAll('.link-start-here').forEach(function (el) {
                el.addEventListener('click', function (e) {
                        e.preventDefault();
                        openModal(signupModal);
                });
        });

        // Fechar pelos elementos com data-close
        document.querySelectorAll('[data-close="modal"]').forEach(function (el) {
                el.addEventListener('click', function () {
                        const modal = el.closest('.auth-modal');
                        closeModal(modal);
                });
        });

        // Fechar com ESC
        document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                        [loginModal, signupModal].forEach(closeModal);
                }
        });

        // Persistência e cumprimento
        function saveUser(user) {
                const raw = localStorage.getItem('rokuzen_users');
                const users = raw ? JSON.parse(raw) : [];
                const exists = users.some(u => u.email === user.email);
                if (exists) return { ok: false, reason: 'E-mail já cadastrado.' };
                users.push(user);
                localStorage.setItem('rokuzen_users', JSON.stringify(users));
                return { ok: true };
        }

        function renderGreeting() {
                const el = document.getElementById('header-greeting');
                if (!el) return;
                const raw = localStorage.getItem('rokuzen_current_user');
                if (!raw) {
                        el.textContent = '';
                        el.classList.remove('is-visible');
                        el.style.display = 'none';
                        return;
                }
                const current = JSON.parse(raw);
                el.textContent = `Olá, ${current.nome}`;
                el.classList.add('is-visible');
                el.style.display = 'block';
        }

        // Mostrar cumprimento se já logado ao carregar
        renderGreeting();
        // Esconder opções de login/cadastro se logado e mostrar opções de usuário logado
        function updateAuthElements() {
                const raw = localStorage.getItem('rokuzen_current_user');
                const isLogged = !!raw;
                
                // Elementos de login/cadastro
                const loginBtn = document.getElementById('btn-login');
                const loginCta = document.getElementById('login-cta');
                
                // Elementos para usuários logados
                const loggedInElements = document.querySelectorAll('.btn-logged-in');
                
                if (isLogged) {
                        // Esconder opções de login/cadastro
                        if (loginBtn) loginBtn.style.display = 'none';
                        if (loginCta) loginCta.style.display = 'none';
                        
                        // Mostrar opções para usuários logados
                        loggedInElements.forEach(el => {
                                el.style.display = 'block';
                                console.log('Mostrando elemento logado:', el.textContent);
                        });
                } else {
                        // Mostrar opções de login/cadastro
                        if (loginBtn) loginBtn.style.display = 'block';
                        if (loginCta) loginCta.style.display = 'block';
                        
                        // Esconder opções para usuários logados
                        loggedInElements.forEach(el => {
                                el.style.display = 'none';
                                console.log('Escondendo elemento logado:', el.textContent);
                        });
                }
        }
        
        // Atualizar elementos ao carregar a página
        updateAuthElements();

        // Cadastro com validação e auto-login
        const formCadastro = document.getElementById('form-cadastro');
        const erroCadastro = document.getElementById('cad-erro');
        if (formCadastro) {
                formCadastro.addEventListener('submit', function (e) {
                        e.preventDefault();
                        const nome = /** @type {HTMLInputElement} */(document.getElementById('cad-nome')).value.trim();
                        const email = /** @type {HTMLInputElement} */(document.getElementById('cad-email')).value.trim();
                        const telefone = /** @type {HTMLInputElement} */(document.getElementById('cad-telefone')).value.trim();
                        const senha = /** @type {HTMLInputElement} */(document.getElementById('cad-senha')).value;
                        const confirmar = /** @type {HTMLInputElement} */(document.getElementById('cad-confirmar')).value;
                        if (senha !== confirmar) {
                                erroCadastro.classList.add('is-visible');
                                return;
                        }
                        erroCadastro.classList.remove('is-visible');
                        const result = saveUser({ nome, email, telefone, senha });
                        if (!result.ok) {
                                alert(result.reason);
                                return;
                        }
                        localStorage.setItem('rokuzen_current_user', JSON.stringify({ nome, email }));
                        renderGreeting();
                        updateAuthElements(); // Atualizar elementos de interface
                        closeModal(signupModal);
                        alert('Cadastro realizado com sucesso!');
                });
        }

        // Login validando localStorage
        const formLogin = document.getElementById('form-login');
        if (formLogin) {
                formLogin.addEventListener('submit', function (e) {
                        e.preventDefault();
                        const email = /** @type {HTMLInputElement} */(document.getElementById('login-email')).value.trim();
                        const senha = /** @type {HTMLInputElement} */(document.getElementById('login-senha')).value;
                        const raw = localStorage.getItem('rokuzen_users');
                        const users = raw ? JSON.parse(raw) : [];
                        const user = users.find(u => u.email === email && u.senha === senha);
                        if (!user) {
                                alert('E-mail ou senha inválidos.');
                                return;
                        }
                        localStorage.setItem('rokuzen_current_user', JSON.stringify({ nome: user.nome, email: user.email }));
                        renderGreeting();
                        updateAuthElements(); // Atualizar elementos de interface
                        closeModal(loginModal);
                });
        }

        // Adiciona ação de sair no dropdown, se não existir
        const dropdown = document.querySelector('.dropdown-conteudo');
        if (dropdown && !dropdown.querySelector('.btn-logout')) {
                const logoutLink = document.createElement('a');
                logoutLink.href = '#';
                logoutLink.className = 'btn-block btn-logout';
                logoutLink.textContent = 'Sair';
                logoutLink.addEventListener('click', function (e) {
                        e.preventDefault();
                        localStorage.removeItem('rokuzen_current_user');
                        renderGreeting();
                        // Reexibir opções de login/cadastro ao sair
                        const accessBtn = document.querySelector('.btn-access-account:not(.btn-block)');
                        const ctaRow = document.querySelector('.login-cta-row');
                        if (accessBtn) accessBtn.style.display = '';
                        if (ctaRow) ctaRow.style.display = '';
                        alert('Você saiu da conta.');
                });
                dropdown.appendChild(logoutLink);
        }
});
</script>

</html>